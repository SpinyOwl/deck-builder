<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/17.0.12" fx:controller="com.spinyowl.cards.controller.DeckBuilderController">
    <top>
        <ToolBar>
            <Button onAction="#onReload" text="Reload" />
            <Region HBox.hgrow="ALWAYS" />
            <Button focusTraversable="false" onAction="#onCloseProject" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-focus-color: transparent;" text="âœ•">
                <tooltip>
                    <Tooltip text="Close Project" />
                </tooltip>
            </Button>
        </ToolBar>
    </top>
    <center>
        <!-- Make console resizable by placing it in a vertical SplitPane with the main content -->
        <SplitPane fx:id="mainVerticalSplit" dividerPositions="0.8" orientation="VERTICAL">
            <!-- Top area: host toolbar and project preview in a BorderPane -->
            <BorderPane>
                <left>
                    <ToolBar orientation="VERTICAL" prefHeight="547.0" prefWidth="15.0">
                        <ToggleButton fx:id="projectTreeToggle" onAction="#onToggleProjectTree" prefHeight="25.0" prefWidth="30.0" selected="true" text="ðŸ“">
                            <tooltip>
                                <Tooltip text="Toggle project tree" />
                            </tooltip>
                        </ToggleButton>
                    </ToolBar>
                </left>
                <center>
                    <SplitPane fx:id="mainHorizontalSplit" dividerPositions="0.25, 0.6501831501831502">
                        <StackPane fx:id="projectTreeContainer">
                            <TreeView fx:id="projectTree" minWidth="50" prefWidth="260" />
                        </StackPane>
                        <StackPane fx:id="middleContentContainer" />
                        <StackPane fx:id="previewPane">
                            <BorderPane fx:id="previewContainer">
                                <center>
                                    <BorderPane style="-fx-padding: 10px;">
                                        <center>
                                            <WebView fx:id="webView" />
                                        </center>
                                    </BorderPane>
                                </center>
                                <bottom>
                                    <ToolBar focusTraversable="false" styleClass="preview-toolbar" StackPane.alignment="BOTTOM_CENTER">
                                        <StackPane.margin>
                                            <Insets right="10" top="10" />
                                        </StackPane.margin>
                                        <ComboBox fx:id="langBox" prefHeight="25.0" prefWidth="0.0" />
                                        <Spinner fx:id="indexSpinner" editable="true" prefHeight="25.0" prefWidth="55.0" />
                                        <Button onAction="#onShow" prefHeight="25.0" prefWidth="45.0" text="Show" />
                                        <Separator orientation="VERTICAL" />
                                        <Button focusTraversable="false" onAction="#onZoomOut" text="-">
                                            <tooltip>
                                                <Tooltip text="Zoom out" />
                                            </tooltip>
                                        </Button>
                                        <Button focusTraversable="false" onAction="#onZoomIn" text="+">
                                            <tooltip>
                                                <Tooltip text="Zoom in" />
                                            </tooltip>
                                        </Button>
                                        <Button focusTraversable="false" onAction="#onZoomReset" text="Reset">
                                            <tooltip>
                                                <Tooltip text="Reset zoom" />
                                            </tooltip>
                                        </Button>
                                        <ToggleButton fx:id="zoomFitToggle" focusTraversable="false" onAction="#onZoomFit" text="Fit">
                                            <tooltip>
                                                <Tooltip text="Fit to size" />
                                            </tooltip>
                                        </ToggleButton>
                                    </ToolBar>

                                </bottom>
                            </BorderPane>
                        </StackPane>
                    </SplitPane>
                </center>
                <right>
                    <ToolBar orientation="VERTICAL" prefWidth="30">
                        <ToggleButton fx:id="previewToggle" onAction="#onTogglePreview" prefHeight="25.0" prefWidth="30.0" selected="true" text="ðŸ‘">
                            <tooltip>
                                <Tooltip text="Toggle preview" />
                            </tooltip>
                        </ToggleButton>
                    </ToolBar>
                </right>
            </BorderPane>
            <!-- Bottom area: console log, now resizable via the SplitPane divider -->
            <TitledPane fx:id="consolePane" animated="false" expanded="false" maxHeight="Infinity" text="Console Log">
                <TextArea fx:id="consoleTextArea" editable="false" prefRowCount="5" style="-fx-font-family: 'Consolas', 'Courier New', monospace;" wrapText="true" />
            </TitledPane>
        </SplitPane>
    </center>
</BorderPane>
